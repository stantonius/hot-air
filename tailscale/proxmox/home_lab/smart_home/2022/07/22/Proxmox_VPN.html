<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Proxmox GUI access with Tailscale VPN | A Technical Hobbyists Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Proxmox GUI access with Tailscale VPN" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let the professionals handle the access to my home lab" />
<meta property="og:description" content="Let the professionals handle the access to my home lab" />
<link rel="canonical" href="https://stantonius.github.io/home/tailscale/proxmox/home_lab/smart_home/2022/07/22/Proxmox_VPN.html" />
<meta property="og:url" content="https://stantonius.github.io/home/tailscale/proxmox/home_lab/smart_home/2022/07/22/Proxmox_VPN.html" />
<meta property="og:site_name" content="A Technical Hobbyists Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-07-22T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-07-22T00:00:00-05:00","url":"https://stantonius.github.io/home/tailscale/proxmox/home_lab/smart_home/2022/07/22/Proxmox_VPN.html","@type":"BlogPosting","headline":"Proxmox GUI access with Tailscale VPN","dateModified":"2022-07-22T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://stantonius.github.io/home/tailscale/proxmox/home_lab/smart_home/2022/07/22/Proxmox_VPN.html"},"description":"Let the professionals handle the access to my home lab","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/home/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://stantonius.github.io/home/feed.xml" title="A Technical Hobbyists Blog" /><!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZYM0GN6Q4W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZYM0GN6Q4W');
</script>


<link rel="shortcut icon" type="image/x-icon" href="/home/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/home/">A Technical Hobbyists Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/home/about/">About Me</a><a class="page-link" href="/home/search/">Search</a><a class="page-link" href="/home/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Proxmox GUI access with Tailscale VPN</h1><p class="page-description">Let the professionals handle the access to my home lab</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-07-22T00:00:00-05:00" itemprop="datePublished">
        Jul 22, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/home/categories/#tailscale">tailscale</a>
        &nbsp;
      
        <a class="category-tags-link" href="/home/categories/#proxmox">proxmox</a>
        &nbsp;
      
        <a class="category-tags-link" href="/home/categories/#home_lab">home_lab</a>
        &nbsp;
      
        <a class="category-tags-link" href="/home/categories/#smart_home">smart_home</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#objective">Objective</a></li>
<li class="toc-entry toc-h2"><a href="#choosing-a-vpn-solution">Choosing a VPN solution</a></li>
<li class="toc-entry toc-h2"><a href="#tailscale">Tailscale</a></li>
<li class="toc-entry toc-h2"><a href="#adding-tailscale-to-proxmox">Adding Tailscale to Proxmox</a>
<ul>
<li class="toc-entry toc-h3"><a href="#secure-access-to-proxmox-gui">Secure Access to Proxmox GUI</a>
<ul>
<li class="toc-entry toc-h4"><a href="#gotchas">Gotchas</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#summary">Summary</a></li>
</ul><h2 id="objective">
<a class="anchor" href="#objective" aria-hidden="true"><span class="octicon octicon-link"></span></a>Objective</h2>
<p>I wanted to be able to access my Proxmox Home Lab from outside my home. However I am super paranoid about exposing anything to the open internet, especially when I have only a bit of firewall setup experience. This meant I would not set up port-forwarding on my router and SSH into my machine via WAN. From research, the only real option left was a VPN.</p>

<p>I chose to use a managed service from Tailscale.</p>

<h2 id="choosing-a-vpn-solution">
<a class="anchor" href="#choosing-a-vpn-solution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Choosing a VPN solution</h2>
<p>There are lots of options out there. From memory, some of the solutions I heard about in forums were pfSense, Wireguard, Tailscale, Zerotier. A lot of info came from the <a href="https://www.reddit.com/r/homelab/">/homelab</a> subreddit and interestingly, one of the main criticisms of a solution like Tailscale is that it goes against the ethos of a home lab, where everything is configured by the tinkerer. While this makes sense in theory, I imagine a lot of these comments came from those far more comfortable with their cybersecurity knowledge than me. Therefore because of the importance of having good security, I decided to stick with Tailscale VPN to have them manage the E2E networking without having to touch the router or the firewall.</p>

<h2 id="tailscale">
<a class="anchor" href="#tailscale" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tailscale</h2>
<p>Tailscale is extremely user friendly and is based on the new industry standard (well this is my interpretation anyway) of VPN encryption Wireguard. Why not just go with Wireguard? Well there is some manual setup for this as well, and again given the security nature of this setup criteria, going with Tailscale means I can set-and-forget.</p>

<p>Additionally Tailscale also automatically restarts after the server reboots (I found several forum posts confirming this and also tested it a few times to ensure it is working)</p>

<h2 id="adding-tailscale-to-proxmox">
<a class="anchor" href="#adding-tailscale-to-proxmox" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Tailscale to Proxmox</h2>
<p>Once I signed up for Tailscale and downloaded the App to my Mac (which becomes the first <em>node</em> in your Tailscale network), it was time to add my Proxmox Home Lab server as my second Tailscale node.</p>

<h3 id="secure-access-to-proxmox-gui">
<a class="anchor" href="#secure-access-to-proxmox-gui" aria-hidden="true"><span class="octicon octicon-link"></span></a>Secure Access to Proxmox GUI</h3>
<p>The first use of Tailscale in my home lab way to provide access to the Proxmox GUI, which exists on my main Proxmox node. This main node is of course Debian Bullseye based OS. The Tailscale Debian installation instructions are <a href="https://tailscale.com/kb/1038/install-debian-bullseye/">here</a>. As soon as you authenticate with Tailscale, your server and its VPN IP address shows up on your Tailscale portal. You can simply copy this IP address and access your Proxmox GUI without having to touch any router or firewall. Amazing.</p>

<p>Given this system is now a server, I also followed their documentation to <a href="https://tailscale.com/kb/1028/key-expiry/">turn off key expiration</a>.</p>

<h4 id="gotchas">
<a class="anchor" href="#gotchas" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gotchas</h4>
<ol>
  <li>I will take to my grave how much time it took me to realize this, however you <em>should</em> install Tailscale <strong>on your main Proxmox node</strong>, not in a host VM or LXC. This seems extremely obvious now, since the purpose of this is to see the GUI <em>which only exists on this main node</em>. However I was trying to keep this main node super clean without addtional installs, and I had misread that I could access this via an LXC (again, way too complicated if it is even possible at all).</li>
  <li>Make sure to prefix your Tailscale IP address with <strong><code class="language-plaintext highlighter-rouge">https://</code></strong> and add the port <strong><code class="language-plaintext highlighter-rouge">8006</code></strong> to the end - something like: <code class="language-plaintext highlighter-rouge">https://100.100.100.96:8006</code>. Without these two elements, I could not connect via the browser.</li>
</ol>

<h2 id="summary">
<a class="anchor" href="#summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary</h2>
<p>So far I have been really impressed with Tailscale. The speed of the connections, cleanliness of the app, the documentation - all is top quality.</p>

<p>Next is to create a Tailscale Proxmox router to handle the various services I want to set up on Proxmox.</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="stantonius/home"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/home/tailscale/proxmox/home_lab/smart_home/2022/07/22/Proxmox_VPN.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/home/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/home/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/home/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Posts related to AI, IoT, Home Labs, Flutter, GCP, Privacy-Enhancing Tech...the list grows every week.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/stantonius" target="_blank" title="stantonius"><svg class="svg-icon grey"><use xlink:href="/home/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/thecraigman22" target="_blank" title="thecraigman22"><svg class="svg-icon grey"><use xlink:href="/home/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
